{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.5.0\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from '@iobroker/adapter-core';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { AuthRepository } from './authRepository';\nimport { Alarm } from './models/Alarm';\nimport { EnumValues } from './models/EnumValues';\nimport { ParameterData } from './models/ParameterData';\nimport { SystemDevice } from './models/SystemDevice';\nimport { SystemWithDevices } from './models/SystemWithDevices';\nimport { MyUplinkRepository } from './myuplinkRepository';\n\n// Helper functions:\n\n// For todays date;\ndeclare global {\n    interface Date {\n        today(): string;\n    }\n}\nDate.prototype.today = function (): string {\n    return this.getFullYear() + '-' + (this.getMonth() + 1 < 10 ? '0' : '') + (this.getMonth() + 1) + '-' + (this.getDate() < 10 ? '0' : '') + this.getDate();\n};\n\n// For the time now\ndeclare global {\n    interface Date {\n        timeNow(): string;\n    }\n}\nDate.prototype.timeNow = function (): string {\n    return (this.getHours() < 10 ? '0' : '') + this.getHours() + ':' + (this.getMinutes() < 10 ? '0' : '') + this.getMinutes() + ':' + (this.getSeconds() < 10 ? '0' : '') + this.getSeconds();\n};\n\nclass Myuplink extends utils.Adapter {\n    public constructor(options: Partial<utils.AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: 'myuplink',\n        });\n        this.on('ready', this.onReady.bind(this));\n        this.on('stateChange', this.onStateChange.bind(this));\n        this.on('unload', this.onUnload.bind(this));\n        this.refreshInterval = 0;\n    }\n\n    private STRICT_FORBIDDEN_CHARS = /[^a-zA-Z0-9_-]+/gu;\n\n    private authRepository: AuthRepository | undefined;\n    private myUplinkRepository: MyUplinkRepository | undefined;\n    private timeout: ioBroker.Timeout | undefined;\n    private refreshInterval: number;\n    private systemIds: Map<string, string> = new Map<string, string>();\n    private deviceIds: Map<string, string> = new Map<string, string>();\n    private categories: Map<string, string> = new Map<string, string>();\n    private parameterIds: Map<string, string> = new Map<string, string>();\n    private parameterIdToCategory: Map<string, string> = new Map<string, string>();\n    private stateIdByParameterIdByDeviceId: Map<string, Map<string, string>> = new Map<string, Map<string, string>>();\n    private existingSystemIds: string[] = [];\n    private existingFolders: string[] = [];\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        // Initialize your adapter here\n\n        this.log.info('Starting adapter.');\n\n        await this.setInfoObjects();\n\n        this.config.RenameSystemIds?.forEach((renameData: ioBroker.RenameData) => {\n            if (renameData.OriginalId && renameData.NewId) {\n                this.log.debug(`Map System ID: ${renameData.OriginalId} -> ${renameData.NewId}`);\n                this.systemIds.set(renameData.OriginalId, this.replaceForbiddenCharacters(renameData.NewId));\n            }\n        });\n        this.config.RenameDeviceIds?.forEach((renameData: ioBroker.RenameData) => {\n            if (renameData.OriginalId && renameData.NewId) {\n                this.log.debug(`Map Device ID: ${renameData.OriginalId} -> ${renameData.NewId}`);\n                this.deviceIds.set(renameData.OriginalId, this.replaceForbiddenCharacters(renameData.NewId));\n            }\n        });\n        this.config.RenameCategories?.forEach((renameData: ioBroker.RenameData) => {\n            if (renameData.OriginalId && renameData.NewId) {\n                this.log.debug(`Map Category: ${renameData.OriginalId} -> ${renameData.NewId}`);\n                this.categories.set(renameData.OriginalId, this.replaceForbiddenCharacters(renameData.NewId));\n            }\n        });\n        this.config.RenameDataIds?.forEach((renameData: ioBroker.RenameData) => {\n            if (renameData.OriginalId && renameData.NewId) {\n                this.log.debug(`Map Data ID: ${renameData.OriginalId} -> ${renameData.NewId}`);\n                this.parameterIds.set(renameData.OriginalId, renameData.NewId);\n                if (renameData.Category) {\n                    this.parameterIdToCategory.set(renameData.OriginalId, this.replaceForbiddenCharacters(renameData.Category));\n                }\n            }\n        });\n\n        this.refreshInterval = this.config.Interval * 60;\n        if (this.refreshInterval < 60) {\n            this.refreshInterval = 60;\n        }\n\n        const identifier: string = this.config.Identifier.trim();\n        const secret: string = this.config.Secret.trim();\n        const callbackURL: string = this.config.CallbackURL.trim();\n        const configured: boolean = this.config.Configured;\n\n        let error = false;\n        if (identifier == '' || identifier == null) {\n            if (configured != false) {\n                this.log.error('Missing Identifier in the settings!');\n            }\n            error = true;\n        }\n        if (secret == '' || secret == null) {\n            if (configured != false) {\n                this.log.error('Missing Secret in the settings!');\n            }\n            error = true;\n        }\n        if (callbackURL == '' || callbackURL == null) {\n            if (configured != false) {\n                this.log.error('Missing Callback URL in the settings!');\n            }\n            error = true;\n        }\n        if (error) {\n            this.setState('info.connection', { val: false, ack: true });\n            this.setState('info.currentError', { val: 'Missing settings!', ack: true });\n            return;\n        }\n\n        const dataDir: string = utils.getAbsoluteDefaultDataDir();\n        let storeDir: string = path.join(dataDir, 'myuplink');\n        try {\n            // create directory\n            if (!fs.existsSync(storeDir)) {\n                fs.mkdirSync(storeDir);\n            }\n        } catch (err) {\n            this.log.error('Could not create storage directory (' + storeDir + '): ' + err);\n            storeDir = __dirname;\n        }\n        const storeFile = path.join(storeDir, 'session.' + this.instance + '.json');\n\n        this.authRepository = new AuthRepository(\n            {\n                clientId: identifier,\n                clientSecret: secret,\n                useAuthorizationCodeGrant: this.config.UseAuthorizationCodeGrant,\n                redirectUri: callbackURL,\n                authCode: this.config.AuthCode.trim(),\n                sessionStoreFilePath: storeFile,\n                baseUrl: 'https://api.myuplink.com',\n                scope: 'READSYSTEM WRITESYSTEM',\n                timeout: 45000,\n                userAgent: 'iobroker.myuplink',\n                renewBeforeExpiry: 5 * 60 * 1000,\n            },\n            this.log,\n        );\n\n        this.myUplinkRepository = new MyUplinkRepository(\n            {\n                baseUrl: 'https://api.myuplink.com',\n                timeout: 45000,\n                userAgent: 'iobroker.myuplink',\n                language: this.config.Language,\n            },\n            this.log,\n        );\n\n        await this.subscribeStatesAsync('*');\n\n        this.log.info('Adapter started.');\n\n        await this.getDataAsync();\n    }\n\n    private async getDataAsync(): Promise<void> {\n        try {\n            if (this.authRepository) {\n                const accessToken = await this.authRepository.getAccessToken();\n                if (accessToken && this.myUplinkRepository) {\n                    const systems = await this.myUplinkRepository.getSystemsAndDevicesAsync(accessToken);\n                    this.setState('info.connection', { val: true, expire: this.refreshInterval + 30, ack: true });\n                    const newDate = new Date();\n                    const datetime = newDate.today() + ' ' + newDate.timeNow();\n                    this.setState('info.updateTime', { val: datetime, ack: true });\n                    this.setState('info.currentError', { val: '', ack: true });\n\n                    systems.systems?.forEach(async (value: SystemWithDevices) => {\n                        await this.setSystemWithDevicesAsync(value, accessToken);\n                    });\n                }\n            }\n        } catch (error) {\n            this.log.error('' + error);\n\n            this.setState('info.connection', { val: false, ack: true });\n\n            const newDate = new Date();\n            const datetime = newDate.today() + ' ' + newDate.timeNow();\n            this.setState('info.lastErrorTime', { val: datetime, ack: true });\n            this.setState('info.lastError', { val: '' + error, ack: true });\n            this.setState('info.currentError', { val: '' + error, ack: true });\n        }\n\n        this.timeout = this.setTimeout(\n            async () => {\n                await this.getDataAsync();\n            },\n            <number>this.refreshInterval * 1000,\n        );\n    }\n\n    private async setSystemWithDevicesAsync(system: SystemWithDevices, accessToken: string): Promise<void> {\n        if (system.systemId != undefined && system.name != undefined) {\n            const systemIdExists = this.existingSystemIds.includes(system.systemId);\n            const firstRun = !systemIdExists;\n            if (!systemIdExists) {\n                this.existingSystemIds.push(system.systemId);\n            }\n            const systemId = this.replaceForbiddenCharacters(system.systemId);\n            const newSystemId = this.systemIds.get(systemId);\n            const systemPath = newSystemId ?? systemId;\n            const systemName = this.removeSoftHyphen(system.name);\n            if (firstRun) {\n                await this.myCreateDeviceAsync(systemPath, systemName);\n            }\n            await this.myCreateStringStateAsync(`${systemPath}.systemId`, 'System ID', system.systemId, firstRun);\n            await this.myCreateStringStateAsync(`${systemPath}.name`, 'Name', systemName, firstRun, 'info.name');\n            if (system.country != undefined) {\n                await this.myCreateStringStateAsync(`${systemPath}.country`, 'Country', system.country, firstRun);\n            }\n            if (system.securityLevel != undefined) {\n                await this.myCreateStringStateAsync(`${systemPath}.securityLevel`, 'Security Level', system.securityLevel, firstRun);\n            }\n            if (system.hasAlarm != undefined) {\n                await this.myCreateBooleanStateAsync(`${systemPath}.hasAlarm`, 'Has Alarm', 'indicator.alarm', system.hasAlarm, firstRun);\n            }\n            system.devices?.forEach(async (dev: SystemDevice) => {\n                await this.setSystemDeviceAsync(dev, systemPath, accessToken);\n            });\n\n            if (this.config.AddActiveNotifications) {\n                const notifications = await this.myUplinkRepository?.getActiveNotificationsAsync(system.systemId, accessToken);\n                if (this.config.AddRawActiveNotifications) {\n                    await this.myCreateStringStateAsync(\n                        `${systemPath}.rawActiveNotifications`,\n                        'Received raw JSON of active notifications',\n                        JSON.stringify(notifications?.notifications, null, ''),\n                        firstRun,\n                    );\n                }\n                let notificationsDescriptions: string = '';\n                notifications?.notifications?.forEach((notification: Alarm) => {\n                    notificationsDescriptions += `${notification.header}: ${notification.description}\\n`;\n                });\n                await this.myCreateStringStateAsync(`${systemPath}.activeNotifications`, 'Active notification descriptions', notificationsDescriptions, firstRun);\n            }\n        }\n    }\n\n    private async setSystemDeviceAsync(device: SystemDevice, systemPath: string, accessToken: string): Promise<void> {\n        if (device.id != undefined && device.product?.name != undefined) {\n            const existingMap = this.stateIdByParameterIdByDeviceId.get(device.id);\n            const firstRun = !existingMap;\n            const stateIdByParameterId = existingMap ?? new Map<string, string>();\n            if (!existingMap) {\n                this.stateIdByParameterIdByDeviceId.set(device.id, stateIdByParameterId);\n            }\n            const deviceId = this.replaceForbiddenCharacters(device.id);\n            const newDeviceId = this.deviceIds.get(deviceId);\n            const deviceSubPath = newDeviceId ?? deviceId;\n            const devicePath = `${systemPath}.${deviceSubPath}`;\n            const deviceName = this.removeSoftHyphen(device.product.name);\n            if (firstRun) {\n                await this.myCreateChannelAsync(devicePath, deviceName);\n            }\n            await this.myCreateStringStateAsync(`${devicePath}.deviceId`, 'Device ID', device.id, firstRun);\n            await this.myCreateStringStateAsync(`${devicePath}.name`, 'Name', deviceName, firstRun, 'info.name');\n            if (device.connectionState != undefined) {\n                await this.myCreateStringStateAsync(`${devicePath}.connectionState`, 'Connection State', device.connectionState, firstRun, 'info.status');\n            }\n            if (device.currentFwVersion != undefined) {\n                await this.myCreateStringStateAsync(`${devicePath}.currentFwVersion`, 'Current Firmware Version', device.currentFwVersion, firstRun, 'info.firmware');\n            }\n            if (device.product?.serialNumber != undefined) {\n                await this.myCreateStringStateAsync(`${devicePath}.serialNumber`, 'Serial Number', device.product.serialNumber, firstRun, 'info.serial');\n            }\n\n            if (this.config.AddData) {\n                const devicePoints = await this.myUplinkRepository?.getDevicePointsAsync(device.id, accessToken);\n                if (this.config.AddRawData) {\n                    await this.myCreateStringStateAsync(`${devicePath}.rawData`, 'Received raw JSON of parameter data', JSON.stringify(devicePoints, null, ''), firstRun);\n                }\n                devicePoints?.forEach(async (data: ParameterData) => {\n                    await this.setParameterDataAsync(data, devicePath, device.id, stateIdByParameterId);\n                });\n                if (firstRun) {\n                    await this.setObjectNotExistsAsync(`${devicePath}.setData`, {\n                        type: 'state',\n                        common: {\n                            name: 'Send raw JSON of parameter data',\n                            type: 'string',\n                            role: 'json',\n                            read: true,\n                            write: true,\n                        },\n                        native: {\n                            rawJson: true,\n                            writable: true,\n                            deviceId: device.id,\n                        },\n                    });\n                }\n            }\n        }\n    }\n\n    private async setParameterDataAsync(data: ParameterData, devicePath: string, deviceId: string | null | undefined, stateIdByParameterId: Map<string, string>): Promise<void> {\n        if (data.parameterId) {\n            const existingObjectId = stateIdByParameterId.get(data.parameterId);\n            const stateId = existingObjectId ?? (await this.getObjectIdAndCreateCategoryAsync(data.parameterId, data.category, devicePath));\n            if (!existingObjectId) {\n                stateIdByParameterId.set(data.parameterId, stateId);\n                await this.createParameterObjectAsync(data, deviceId, stateId);\n            }\n            await this.setStateAsync(stateId, { val: data.value, ack: true });\n        }\n    }\n\n    private async getObjectIdAndCreateCategoryAsync(parameterId: string, category: string | null | undefined, devicePath: string): Promise<string> {\n        const newParameterId = this.parameterIds.get(parameterId) ?? parameterId;\n        const parameterSubPath = this.replaceForbiddenCharacters(newParameterId);\n        let objectId = `${devicePath}.${parameterSubPath}`;\n        const newCategory = this.parameterIdToCategory.get(parameterId);\n        if (newCategory) {\n            objectId = `${devicePath}.${newCategory}.${parameterSubPath}`;\n        } else if (category) {\n            const categoryId = this.replaceForbiddenCharacters(category);\n            const newCategoryId = this.categories.get(categoryId);\n            const categorySubPath = newCategoryId ?? categoryId;\n            const catPath = `${devicePath}.${categorySubPath}`;\n            const pathWithCat = `${catPath}.${parameterSubPath}`;\n            if (this.config.GroupData) {\n                await this.delObjectAsync(objectId);\n                objectId = pathWithCat;\n                await this.myCreateFolderAsync(catPath, category);\n            } else {\n                await this.delObjectAsync(pathWithCat);\n                await this.delObjectAsync(catPath);\n            }\n        }\n        return objectId;\n    }\n\n    private async createParameterObjectAsync(data: ParameterData, deviceId: string | null | undefined, stateId: string): Promise<void> {\n        const obj: ioBroker.SettableObject = {\n            type: 'state',\n            common: {\n                name: this.removeSoftHyphen(data.parameterName ?? ''),\n                type: 'number',\n                role: 'value',\n                read: true,\n                write: data.writable ?? false,\n            },\n            native: {\n                parameterId: data.parameterId,\n                writable: data.writable,\n                deviceId: deviceId,\n            },\n        };\n        if (data.parameterUnit) {\n            obj.common.unit = data.parameterUnit;\n            switch (data.parameterUnit) {\n                case 'kWh':\n                case 'Ws':\n                    obj.common.role = 'value.energy';\n                    break;\n                case 'W':\n                case 'kW':\n                    obj.common.role = 'value.power';\n                    break;\n                case '\u00B0C':\n                    obj.common.role = 'value.temperature';\n                    break;\n                case 'Hz':\n                    obj.common.role = 'value.frequency';\n                    break;\n                case 'A':\n                    obj.common.role = 'value.current';\n                    break;\n                case 'V':\n                    obj.common.role = 'value.voltage';\n                    break;\n                case '%RH':\n                    obj.common.role = 'value.humidity';\n                    obj.common.unit = '%';\n                    break;\n                case 'bar':\n                    obj.common.role = 'value.pressure';\n                    break;\n            }\n        }\n        if (data.minValue) {\n            obj.common.min = data.minValue;\n        }\n        if (data.maxValue) {\n            obj.common.max = data.maxValue;\n        }\n        if (data.stepValue) {\n            obj.common.step = data.stepValue;\n        }\n        if (data.enumValues && data.enumValues.length > 0) {\n            const states: Record<string, string> = {};\n            data.enumValues.forEach((enumValue: EnumValues) => {\n                if (enumValue.text && enumValue.value) {\n                    states[enumValue.value] = this.removeSoftHyphen(enumValue.text);\n                }\n            });\n            obj.common.states = states;\n        }\n        await this.setObjectNotExistsAsync(stateId, obj);\n    }\n\n    private async setInfoObjects(): Promise<void> {\n        await this.setObjectNotExistsAsync('info', {\n            type: 'channel',\n            common: {\n                name: 'Information',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.connection', {\n            type: 'state',\n            common: {\n                name: 'Connected to myUplink',\n                role: 'indicator.connected',\n                type: 'boolean',\n                read: true,\n                write: false,\n                def: false,\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.currentError', {\n            type: 'state',\n            common: {\n                name: 'Current Error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.updateTime', {\n            type: 'state',\n            common: {\n                name: 'Time of the last update',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.lastError', {\n            type: 'state',\n            common: {\n                name: 'Last Error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.lastErrorTime', {\n            type: 'state',\n            common: {\n                name: 'Time of the last error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n    }\n\n    private async myCreateDeviceAsync(path: string, name: string): Promise<void> {\n        this.log.debug(`create Device: ${path}`);\n        await this.setObjectNotExistsAsync(path, {\n            type: 'device',\n            common: {\n                name: name,\n            },\n            native: {},\n        });\n    }\n\n    private async myCreateChannelAsync(path: string, name: string): Promise<void> {\n        this.log.debug(`create Channel: ${path}`);\n        await this.setObjectNotExistsAsync(path, {\n            type: 'channel',\n            common: {\n                name: name,\n            },\n            native: {},\n        });\n    }\n\n    private async myCreateFolderAsync(path: string, name: string): Promise<void> {\n        if (!this.existingFolders.includes(path)) {\n            this.existingFolders.push(path);\n            this.log.debug(`create Folder: ${path}`);\n            await this.setObjectNotExistsAsync(path, {\n                type: 'folder',\n                common: {\n                    name: name,\n                },\n                native: {},\n            });\n        }\n    }\n\n    private async myCreateStringStateAsync(path: string, name: string, value: string, createObject: boolean, role: string = 'text'): Promise<void> {\n        if (createObject) {\n            this.log.debug(`create State: ${path}`);\n            await this.setObjectNotExistsAsync(path, {\n                type: 'state',\n                common: {\n                    name: name,\n                    type: 'string',\n                    role: role,\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n        }\n        await this.setStateAsync(path, { val: value, ack: true });\n    }\n\n    private async myCreateBooleanStateAsync(path: string, name: string, role: string, value: boolean, createObject: boolean): Promise<void> {\n        if (createObject) {\n            this.log.debug(`create State: ${path}`);\n            await this.setObjectNotExistsAsync(path, {\n                type: 'state',\n                common: {\n                    name: name,\n                    type: 'boolean',\n                    role: role,\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n        }\n        await this.setStateAsync(path, { val: value, ack: true });\n    }\n\n    private removeSoftHyphen(text: string): string {\n        return text.replace(new RegExp('\\u00AD', 'g'), '');\n    }\n\n    private replaceForbiddenCharacters(text: string): string {\n        return this.removeSoftHyphen(text).replace(this.STRICT_FORBIDDEN_CHARS, '_');\n    }\n\n    /**\n     * Is called if a subscribed state changes\n     */\n    private async onStateChange(id: string, state: ioBroker.State | null | undefined): Promise<void> {\n        if (state != null && state.ack === false && state.q == this.constants.STATE_QUALITY.GOOD && state.val != null && this.authRepository != null && this.myUplinkRepository != null) {\n            this.log.debug(`state ${id} changed: ${state.val} (ack = ${state.ack})`);\n            const obj = await this.getObjectAsync(id);\n            if (obj != null && obj.native != null && obj.native.writable == true && obj.native.deviceId != null && obj.native.deviceId != '') {\n                try {\n                    const accessToken = await this.authRepository.getAccessToken();\n                    if (accessToken) {\n                        const deviceId = obj.native.deviceId;\n                        const value = state.val.toString();\n                        if (obj.native.parameterId != null && obj.native.parameterId != '') {\n                            const parameterId = obj.native.parameterId.toString();\n                            await this.myUplinkRepository.setDevicePointAsync(deviceId, accessToken, parameterId, value);\n                            await this.getAndSetParameters(id, deviceId, accessToken, [parameterId]);\n                        } else if (obj.native.rawJson === true) {\n                            const keyValueDictionary: Record<string, string> = JSON.parse(value);\n                            await this.myUplinkRepository.setDevicePointsAsync(deviceId, accessToken, keyValueDictionary);\n                            await this.setStateAsync(id, { val: state.val, q: this.constants.STATE_QUALITY.GOOD, ack: true, c: undefined });\n                            const parameterIds = Object.keys(keyValueDictionary);\n                            await this.getAndSetParameters(id, deviceId, accessToken, parameterIds);\n                        }\n                    }\n                } catch (error) {\n                    const errorString = `${error}`;\n                    this.log.error(errorString);\n                    const quality = this.constants.STATE_QUALITY.DEVICE_ERROR_REPORT;\n                    await this.setStateAsync(id, { val: state.val, q: quality, c: errorString, ack: false });\n                }\n            }\n        }\n    }\n\n    private async getAndSetParameters(id: string, deviceId: string, accessToken: string, parameterIds: string[]): Promise<void> {\n        if (this.myUplinkRepository) {\n            const devicePoints = await this.myUplinkRepository.getDevicePointsAsync(deviceId, accessToken, parameterIds.join(','));\n            devicePoints?.forEach(async (data: ParameterData) => {\n                if (data.parameterId && parameterIds.includes(data.parameterId)) {\n                    await this.setStateAsync(id, { val: data.value, ack: true });\n                }\n            });\n        }\n    }\n\n    /**\n     * Is called when adapter shuts down - callback has to be called under any circumstances!\n     */\n    private onUnload(callback: () => void): void {\n        try {\n            this.clearTimeout(this.timeout);\n            this.timeout = undefined;\n            this.authRepository = undefined;\n            this.myUplinkRepository = undefined;\n            this.setState('info.connection', { val: false, ack: true });\n            this.log.info('Cleaned everything up...');\n            callback();\n        } catch (e) {\n            callback();\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Myuplink(options);\n} else {\n    // otherwise start the instance directly\n    (() => new Myuplink())();\n}\n"],
  "mappings": "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",
  "names": ["path"]
}
