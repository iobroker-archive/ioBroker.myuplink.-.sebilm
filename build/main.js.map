{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.5.0\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from '@iobroker/adapter-core';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { AuthRepository } from './authRepository';\nimport { Alarm } from './models/Alarm';\nimport { EnumValues } from './models/EnumValues';\nimport { ParameterData } from './models/ParameterData';\nimport { SystemDevice } from './models/SystemDevice';\nimport { SystemWithDevices } from './models/SystemWithDevices';\nimport { MyUplinkRepository } from './myuplinkRepository';\n\n// Helper functions:\n\n// For todays date;\ndeclare global {\n    interface Date {\n        today(): string;\n    }\n}\nDate.prototype.today = function (): string {\n    return this.getFullYear() + '-' + (this.getMonth() + 1 < 10 ? '0' : '') + (this.getMonth() + 1) + '-' + (this.getDate() < 10 ? '0' : '') + this.getDate();\n};\n\n// For the time now\ndeclare global {\n    interface Date {\n        timeNow(): string;\n    }\n}\nDate.prototype.timeNow = function (): string {\n    return (this.getHours() < 10 ? '0' : '') + this.getHours() + ':' + (this.getMinutes() < 10 ? '0' : '') + this.getMinutes() + ':' + (this.getSeconds() < 10 ? '0' : '') + this.getSeconds();\n};\n\nfunction removeSoftHyphen(text: string): string {\n    return text.replace(new RegExp('\\u00AD', 'g'), '');\n}\n\nfunction replaceUnwantedLetters(text: string): string {\n    return removeSoftHyphen(text.replace(new RegExp(' ', 'g'), '_').replace(new RegExp('\\\\.', 'g'), '_'));\n}\n\nasync function createDeviceAsync(adapter: Myuplink, path: string, name: string): Promise<void> {\n    await adapter.setObjectNotExistsAsync(path, {\n        type: 'device',\n        common: {\n            name: name,\n            role: 'text',\n        },\n        native: {},\n    });\n}\n\nasync function createChannelAsync(adapter: Myuplink, path: string, name: string): Promise<void> {\n    await adapter.setObjectNotExistsAsync(path, {\n        type: 'channel',\n        common: {\n            name: name,\n            role: 'text',\n        },\n        native: {},\n    });\n}\n\nasync function createStringStateAsync(adapter: Myuplink, path: string, name: string, value: string): Promise<void> {\n    await adapter.setObjectNotExistsAsync(path, {\n        type: 'state',\n        common: {\n            name: name,\n            type: 'string',\n            role: 'text',\n            read: true,\n            write: false,\n        },\n        native: {},\n    });\n    await adapter.setStateAsync(path, { val: value, ack: true });\n}\n\nasync function createBooleanStateAsync(adapter: Myuplink, path: string, name: string, role: string, value: boolean): Promise<void> {\n    await adapter.setObjectNotExistsAsync(path, {\n        type: 'state',\n        common: {\n            name: name,\n            type: 'boolean',\n            role: role,\n            read: true,\n            write: false,\n        },\n        native: {},\n    });\n    await adapter.setStateAsync(path, { val: value, ack: true });\n}\n\nclass Myuplink extends utils.Adapter {\n    public constructor(options: Partial<utils.AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: 'myuplink',\n        });\n        this.on('ready', this.onReady.bind(this));\n        this.on('unload', this.onUnload.bind(this));\n        this.refreshInterval = 0;\n    }\n\n    private authRepository: AuthRepository | undefined;\n    private myUplinkRepository: MyUplinkRepository | undefined;\n    private timeout: ioBroker.Timeout | undefined;\n    private refreshInterval: number;\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        // Initialize your adapter here\n\n        this.log.info('Starting adapter.');\n\n        await this.setInfoObjects();\n\n        this.refreshInterval = this.config.Interval * 60;\n        if (this.refreshInterval < 60) {\n            this.refreshInterval = 60;\n        }\n\n        const identifier: string = this.config.Identifier.trim();\n        const secret: string = this.config.Secret.trim();\n        const callbackURL: string = this.config.CallbackURL.trim();\n        const configured: boolean = this.config.Configured;\n\n        let error = false;\n        if (identifier == '' || identifier == null) {\n            if (configured != false) {\n                this.log.error('Missing Identifier in the settings!');\n            }\n            error = true;\n        }\n        if (secret == '' || secret == null) {\n            if (configured != false) {\n                this.log.error('Missing Secret in the settings!');\n            }\n            error = true;\n        }\n        if (callbackURL == '' || callbackURL == null) {\n            if (configured != false) {\n                this.log.error('Missing Callback URL in the settings!');\n            }\n            error = true;\n        }\n        if (error) {\n            this.setState('info.connection', { val: false, ack: true });\n            this.setState('info.currentError', { val: 'Missing settings!', ack: true });\n            return;\n        }\n\n        const dataDir: string = utils.getAbsoluteDefaultDataDir();\n        let storeDir: string = path.join(dataDir, 'myuplink');\n        try {\n            // create directory\n            if (!fs.existsSync(storeDir)) {\n                fs.mkdirSync(storeDir);\n            }\n        } catch (err) {\n            this.log.error('Could not create storage directory (' + storeDir + '): ' + err);\n            storeDir = __dirname;\n        }\n        const storeFile = path.join(storeDir, 'session.' + this.instance + '.json');\n\n        this.authRepository = new AuthRepository(\n            {\n                clientId: identifier,\n                clientSecret: secret,\n                useAuthorizationCodeGrant: this.config.UseAuthorizationCodeGrant,\n                redirectUri: callbackURL,\n                authCode: this.config.AuthCode.trim(),\n                sessionStoreFilePath: storeFile,\n                baseUrl: 'https://api.myuplink.com',\n                scope: 'READSYSTEM WRITESYSTEM',\n                timeout: 45000,\n                userAgent: 'iobroker.myuplink',\n                renewBeforeExpiry: 5 * 60 * 1000,\n            },\n            this.log,\n        );\n\n        this.myUplinkRepository = new MyUplinkRepository(\n            {\n                baseUrl: 'https://api.myuplink.com',\n                timeout: 45000,\n                userAgent: 'iobroker.myuplink',\n                language: this.config.Language,\n            },\n            this.log,\n        );\n\n        this.log.info('Adapter started.');\n\n        this.getData();\n    }\n\n    private async getData(): Promise<void> {\n        try {\n            if (this.authRepository) {\n                const accessToken = await this.authRepository.getAccessToken();\n                if (accessToken && this.myUplinkRepository) {\n                    const systems = await this.myUplinkRepository.getSystemsAndDevices(accessToken);\n                    this.setState('info.connection', { val: true, expire: this.refreshInterval + 30, ack: true });\n                    const newDate = new Date();\n                    const datetime = newDate.today() + ' ' + newDate.timeNow();\n                    this.setState('info.updateTime', { val: datetime, ack: true });\n                    this.setState('info.currentError', { val: '', ack: true });\n\n                    systems.systems?.forEach(async (value: SystemWithDevices) => {\n                        await this.setSystemWithDevices(value, accessToken);\n                    });\n                }\n            }\n        } catch (error) {\n            this.log.error('' + error);\n\n            this.setState('info.connection', { val: false, ack: true });\n\n            const newDate = new Date();\n            const datetime = newDate.today() + ' ' + newDate.timeNow();\n            this.setState('info.lastErrorTime', { val: datetime, ack: true });\n            this.setState('info.lastError', { val: '' + error, ack: true });\n            this.setState('info.currentError', { val: '' + error, ack: true });\n        }\n\n        this.timeout = this.setTimeout(\n            async () => {\n                await this.getData();\n            },\n            <number>this.refreshInterval * 1000,\n        );\n    }\n\n    private async setSystemWithDevices(system: SystemWithDevices, accessToken: string): Promise<void> {\n        if (system.systemId != undefined && system.name != undefined) {\n            const systemPath = replaceUnwantedLetters(system.systemId);\n            const systemName = removeSoftHyphen(system.name);\n            await createDeviceAsync(this, systemPath, systemName);\n            await createStringStateAsync(this, `${systemPath}.systemId`, 'System ID', system.systemId);\n            await createStringStateAsync(this, `${systemPath}.name`, 'Name', systemName);\n            if (system.country != undefined) {\n                await createStringStateAsync(this, `${systemPath}.country`, 'Country', system.country);\n            }\n            if (system.securityLevel != undefined) {\n                await createStringStateAsync(this, `${systemPath}.securityLevel`, 'Security Level', system.securityLevel);\n            }\n            if (system.hasAlarm != undefined) {\n                await createBooleanStateAsync(this, `${systemPath}.hasAlarm`, 'Has Alarm', 'indicator.alarm', system.hasAlarm);\n            }\n            system.devices?.forEach(async (dev: SystemDevice) => {\n                await this.setSystemDevice(dev, systemPath, accessToken);\n            });\n\n            if (this.config.AddActiveNotifications) {\n                const notifications = await this.myUplinkRepository?.getActiveNotifications(system.systemId, accessToken);\n                if (this.config.AddRawActiveNotifications) {\n                    await createStringStateAsync(this, `${systemPath}.rawActiveNotifications`, 'Received raw JSON of active notifications', JSON.stringify(notifications?.notifications, null, ''));\n                }\n                let notificationsDescriptions: string = '';\n                notifications?.notifications?.forEach((notification: Alarm) => {\n                    notificationsDescriptions += `${notification.header}: ${notification.description}\\n`;\n                });\n                await createStringStateAsync(this, `${systemPath}.activeNotifications`, 'Active notification descriptions', notificationsDescriptions);\n            }\n        }\n    }\n\n    private async setSystemDevice(device: SystemDevice, systemPath: string, accessToken: string): Promise<void> {\n        if (device.id != undefined && device.product?.name != undefined) {\n            const devPath = `${systemPath}.${replaceUnwantedLetters(device.id)}`;\n            const deviceName = removeSoftHyphen(device.product.name);\n            await createChannelAsync(this, devPath, deviceName);\n            await createStringStateAsync(this, `${devPath}.deviceId`, 'Device ID', device.id);\n            await createStringStateAsync(this, `${devPath}.name`, 'Name', deviceName);\n            if (device.connectionState != undefined) {\n                await createStringStateAsync(this, `${devPath}.connectionState`, 'Connection State', device.connectionState);\n            }\n            if (device.currentFwVersion != undefined) {\n                await createStringStateAsync(this, `${devPath}.currentFwVersion`, 'Current Firmware Version', device.currentFwVersion);\n            }\n            if (device.product?.serialNumber != undefined) {\n                await createStringStateAsync(this, `${devPath}.serialNumber`, 'Serial Number', device.product.serialNumber);\n            }\n\n            if (this.config.AddData) {\n                const devicePoints = await this.myUplinkRepository?.getDevicePoints(device.id, accessToken);\n                if (this.config.AddRawData) {\n                    await createStringStateAsync(this, `${devPath}.rawData`, 'Received raw JSON of parameter data', JSON.stringify(devicePoints, null, ''));\n                }\n                devicePoints?.forEach(async (data: ParameterData) => {\n                    await this.setParameterData(data, devPath);\n                });\n            }\n        }\n    }\n\n    private async setParameterData(data: ParameterData, devPath: string): Promise<void> {\n        if (data.parameterId && data.parameterName) {\n            const cathPath = data.category ? `${devPath}.${replaceUnwantedLetters(data.category)}.${replaceUnwantedLetters(data.parameterId)}` : null;\n            const noCathPath = `${devPath}.${replaceUnwantedLetters(data.parameterId)}`;\n            if (cathPath) {\n                if (this.config.GroupData) {\n                    await this.delObjectAsync(noCathPath);\n                } else {\n                    await this.delObjectAsync(cathPath);\n                }\n            }\n            // getObjectAsync\n            const path = this.config.GroupData && cathPath ? cathPath : noCathPath;\n            const objectExists = await this.objectExists(path);\n            if (!objectExists) {\n                const obj: ioBroker.SettableObject = {\n                    type: 'state',\n                    common: {\n                        name: removeSoftHyphen(data.parameterName),\n                        type: 'number',\n                        role: 'value',\n                        read: true,\n                        write: data.writable ?? false,\n                    },\n                    native: {},\n                };\n                if (data.parameterUnit) {\n                    obj.common.unit = data.parameterUnit;\n                }\n                if (data.minValue) {\n                    obj.common.min = data.minValue;\n                }\n                if (data.maxValue) {\n                    obj.common.max = data.maxValue;\n                }\n                if (data.stepValue) {\n                    obj.common.step = data.stepValue;\n                }\n                if (data.enumValues && data.enumValues.length > 0) {\n                    const states: Record<string, string> = {};\n                    data.enumValues.forEach((enumValue: EnumValues) => {\n                        if (enumValue.text && enumValue.value) {\n                            states[enumValue.value] = removeSoftHyphen(enumValue.text);\n                        }\n                    });\n                    obj.common.states = states;\n                }\n                await this.setObjectNotExistsAsync(path, obj);\n            }\n            await this.setStateAsync(path, { val: data.value, ack: true });\n        }\n    }\n\n    private async setInfoObjects(): Promise<void> {\n        await this.setObjectNotExistsAsync('info', {\n            type: 'channel',\n            common: {\n                name: 'Information',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.connection', {\n            type: 'state',\n            common: {\n                name: 'Connected to myUplink',\n                role: 'indicator.connected',\n                type: 'boolean',\n                read: true,\n                write: false,\n                def: false,\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.currentError', {\n            type: 'state',\n            common: {\n                name: 'Current Error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.updateTime', {\n            type: 'state',\n            common: {\n                name: 'Time of the last update',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.lastError', {\n            type: 'state',\n            common: {\n                name: 'Last Error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync('info.lastErrorTime', {\n            type: 'state',\n            common: {\n                name: 'Time of the last error',\n                role: 'text',\n                type: 'string',\n                read: true,\n                write: false,\n                def: '',\n            },\n            native: {},\n        });\n    }\n\n    /**\n     * Is called when adapter shuts down - callback has to be called under any circumstances!\n     */\n    private onUnload(callback: () => void): void {\n        try {\n            this.clearTimeout(this.timeout);\n            this.timeout = undefined;\n            this.authRepository = undefined;\n            this.myUplinkRepository = undefined;\n            this.setState('info.connection', { val: false, ack: true });\n            this.log.info('Cleaned everything up...');\n            callback();\n        } catch (e) {\n            callback();\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Myuplink(options);\n} else {\n    // otherwise start the instance directly\n    (() => new Myuplink())();\n}\n"],
  "mappings": "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",
  "names": ["path"]
}
